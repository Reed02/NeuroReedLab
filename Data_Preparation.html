<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Data Preparation in Python | NeuroReedLab</title>

  <style>
    /* ===== GLOBAL ===== */
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f8fa;
    }

    h1, h2 {
      color: #0b3d91;
    }

    /* ===== NOTES SECTION STYLING ===== */
    .notes {
      background: white;
      padding: 20px;
      border-radius: 6px;
      margin-bottom: 40px;
    }

    .notes p {
      font-size: 1.1em;          /* CHANGE TEXT SIZE HERE */
      color: #333;               /* CHANGE TEXT COLOR HERE */
      line-height: 1.6;
      margin-bottom: 12px;
    }

    .notes .emphasis {
      color: #b30000;            /* CHANGE EMPHASIS COLOR HERE */
      font-weight: bold;
    }

    .notes .small {
      font-size: 0.9em;          /* SMALLER TEXT */
      color: #666;
    }

    /* ===== CODE SECTION STYLING ===== */
    .code-section pre {
      background: #1e1e1e;
      color: #dcdcdc;
      padding: 16px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 0.95em;         /* CHANGE CODE SIZE HERE */
    }

    .code-section code {
      font-family: Consolas, Monaco, monospace;  /* CHANGE CODE FONT HERE */
    }
  </style>
</head>

<body>

  <h1>Kaggle Titanic Training Dataset Preparation</h1>

  <!-- NOTES SECTION -->
  <section class="notes">
    <h2>Notes</h2>

    <p>
      This section documents how to prepare and repurpose the Kaggle Titanic Training Dataset in python for analysis.
    </p>

  </section>

  <!-- CODE SECTION -->
  <section class="code-section">
    <h2>Code</h2>

    <p>
    Before we can do anything, we have to import our libraries and our dataset. Then we have to make sure that it is read correctly.
    Each library has a specific job:
      <ul>
        <li>pandas: handles data tables</li>
        <li>numpy: helps with numerical operations</li>
        <li>statistics: is used to find things like the mode</li>
        <li>seaborn and matplotlib: used for plotting and visualization</li>
      </ul>
    </p>
    <pre><code>
    import pandas as pd
    import numpy as np
    import statistics as stat
    import seaborn as sns
    import matplotlib.pyplot as plt

    filename = "Titanic_Kaggle_Train_Data.csv"
    TitanicDF = pd.read_csv(filename)

    print(TitanicDF.head())
    print(TitanicDF.dtypes)
    </code></pre>


    <p>
    Next we look at columns that are not very useful. The Cabin Column has many missing values, and Ticket doesn't help us with anything. So we remove these.
    </p>
    
    <pre><code>
    drop_these = ["Cabin", "Ticket"]
    TitanicDF.drop(drop_these, inplace=True, axis=1)
    print(TitanicDF.head(15)
    </code></pre>

    <p>
    Some of our columns do not have the correct data type.
    Machine learning models and analysis work better when data types make sense.
      <ul>
        <li> IDs should not be numeric</li>
        <li> Labels should be categorical</li>
        <li> Categories should not be treated as numbers</li>
      </ul>
    </p>
    
    <pre><code>
    # PassengerId should be string
    TitanicDF["PassengerId"] = TitanicDF["PassengerId"].astype(str)
    print(TitanicDF.dtypes)

    # Survived should be categorical
    TitanicDF["Survived"] = TitanicDF["Survived"].astype('category')
    print(TitanicDF.dtypes)

    # Convert other categorical variables
    TitanicDF["Sex"] = TitanicDF["Sex"].astype('category')
    TitanicDF["Pclass"] = TitanicDF["Pclass"].astype('category')
    TitanicDF["Embarked"] = TitanicDF["Embarked"].astype('category')
    print(TitanicDF.dtypes)
    </code></pre>


    <p>
    Here we check all columns to see how many missing values (NaN) they contain.
    Missing values can break analysis or models, so its important to know:
      <ul>
        <li> Where they are </li>
        <li> How many there are </li>
        <li> Whether they are a problem or not </li>
      </ul>
    </p>
    
    <pre><code>
    ColumnNamesList = TitanicDF.columns.values
    print(ColumnNamesList)

    for name in ColumnNamesList:
      print(name, ": ")
      total_nas = TitanicDF[name].isna().sum()
      print(total_nas)

    print(TitanicDF.shape)
    </code></pre>

    <p>
    Next we fill missing Embarked values using the most common value (mode) and drop rows where Age was missing
    We do this since Embarked has only a few missing values, so filling them is safe and because Age is strongly related
    to survival, so guessing values could hurt the analysis.
    Dropping rows with missing ages is safer for this dataset.
    </p>
    
    <pre><code>
    # Fill missing Embarked values with mode
    print(TitanicDF.Embarked)
    TheMode = stat.mode(TitanicDF.Embarked)
    print(TheMode)
    TitanicDF.Embarked.fillna(TheMode, inplace=True)
    print(TitanicDF.isnull().sum())

    #Drop rows with missing Age values
    TitanicDF.dropna(inplace=True)
    print(TitanicDF.isnull().sum())
    </code></pre>


    <p>
    Then we looked at a summary of the statistics and visualized the Age variable.
    Plots and statistics help us:
      <ul>
        <li> Spot weird values </li>
        <li> Understand the distribution </li>
        <li> Catch mistakes in the data </li>
      </ul>
    </p>
    
    <pre><code>
    print(TitanicDF.columns.values)
    print(TitanicDF.describe())

    plot1 = sns.boxplot(x="Age", data=TitanicDF)
    plt.show()

    plot2 = sns.swarmplot(x="Age", data=TitanicDF, color=".25")
    plt.show()
    </code></pre>

    <pre><code>
    TitanicDF = TitanicDF[TitanicDF.Age > 1]
    print(TitanicDF.head(15))
    print(TitanicDF.describe())
    </code></pre>

    <pre><code>
    plot3 = sns.boxplot(x="Fare", data=TitanicDF)
    plt.show()

    print(TitanicDF[TitanicDF.Fare > 400].count())
    TitanicDF = TitanicDF[TitanicDF.Fare < 400]
    print(TitanicDF.describe())
    </code></pre>

    <pre><code>
    print(TitanicDF.head(15))

    sns.countplot(x="Survived", data=TitanicDF)
    plt.show()

    sns.countplot(x="Pclass", data=TitanicDF)
    plt.show()

    sns.countplot(x="Sex", data=TitanicDF)
    plt.show()
    </code></pre>
    
  </section>

</body>
</html>

